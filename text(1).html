<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<style>
* {
    margin: 0;
    padding: 0;
}

#box {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    background: red;
    /*margin: 100px auto;*/
    font-size: 30px;
    text-align: center;
}
</style>
<script type="text/javascript">
function d2a(n) {
    return Math.PI * n / 180;
}

function a2d(n) {
    return 180 * n / Math.PI;
}
document.addEventListener('DOMContentLoaded', function() {
    var oBox = document.getElementById('box');
    //oBox.style.transform='rotate(15deg)';
    //oBox.style.transform='rotate(90deg)';
    var d = 0;
    var d0 = 30;
    var d3 = 0;
   
    oBox.style.transform = 'rotate(' + (d) + 'deg)';
    oBox.onmousedown = function(ev) {
        var x = oBox.offsetLeft + 100 - ev.clientX;
        var y = oBox.offsetTop + 100 - ev.clientY;
        //储存鼠标按下时的角度
        var d1 = a2d(Math.atan2(y, x));
         var d2=d1;
        oBox.onmousemove = function(ev) {
            var x2 = oBox.offsetLeft + 100 - ev.clientX;
            var y2 = oBox.offsetTop + 100 - ev.clientY;
            //鼠标移动是的角度
            var dis = a2d(Math.atan2(y2, x2)) - d2;
            if(dis<=(-300)){
            	dis=1;
            }
            if(dis>=(300)){
            	dis=-1;
            }

             console.log(dis);
             if(dis>0){
             	 d+=2;
             }
             if(dis<0){
             	 d-=2;
             }
             d2 = a2d(Math.atan2(y2, x2));
         // console.log(dis);
                // if (d2 <= 0) {
                //     d2 += 360;
                // }

            

            d3 = d2 - d1;
            //console.log(d2);
           // console.log(d3);

            oBox.style.transform = 'rotate(' + (d) + 'deg)';
        };
       oBox.onmouseup = function() {
            //	d += d3;
           
            document.onmousemove = null;
            document.onmouseup = null;
        }

    }
}, false)
</script>

<body>
    <div id="box">
        <p>3</p>
        <p>6</p>
        <p>9</p>
    </div>
</body>

</html>
